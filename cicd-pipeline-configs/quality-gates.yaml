# ============================================================================
# Quality Gates Configuration
# ============================================================================
# Description: Defines quality thresholds and gate criteria
# Version: 1.0.0
# ============================================================================

quality_gates:
  code_coverage:
    enabled: true
    threshold: 80
    metric: lines
    fail_on_decrease: true
    exclude_patterns:
      - "**/*.spec.ts"
      - "**/*.test.ts"
      - "**/mock/**"
      - "**/fixtures/**"

  code_quality:
    linting:
      enabled: true
      fail_on_error: true
      fail_on_warning: false
      max_warnings: 50
    
    complexity:
      max_cyclomatic: 10
      max_cognitive: 15
      max_file_lines: 500
    
    duplication:
      max_percentage: 5
      min_lines: 50

  security:
    dependency_scan:
      enabled: true
      fail_on_critical: true
      fail_on_high: true
      fail_on_medium: false
      allowed_licenses:
        - MIT
        - Apache-2.0
        - BSD-3-Clause
        - ISC
    
    sast_scan:
      enabled: true
      fail_on_critical: true
      fail_on_high: false

  performance:
    build_time:
      max_minutes: 10
      warning_threshold_minutes: 7
    
    bundle_size:
      max_size_mb: 5
      warning_threshold_mb: 4
    
    test_execution:
      max_minutes: 15
      warning_threshold_minutes: 10

  documentation:
    api_coverage:
      enabled: false
      min_percentage: 90
    
    readme_required: true
    changelog_required: true

reporting:
  format: markdown
  output_path: reports/quality-gate-report.md
  include_trends: true
  include_recommendations: true

enforcement:
  block_merge_on_failure: true
  allow_admin_override: true
  required_approvals: 1
  dismiss_stale_reviews: true

exceptions:
  skip_on_draft_pr: true
  skip_on_wip_label: true
  skip_branches:
    - hotfix/*
    - experiment/*